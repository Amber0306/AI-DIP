RRoI Learner 和 RRoI Warping 的组合形成了一个 RoI Transformer (RT)。它可以用来代替正常的 RoI 翘曲操作。来自  RT 的池化特征是旋转不变的。此外，RRoI 为以后的回归提供了更好的初始化，因为与匹配的 HRoI 相比，匹配的 RRoI 更接近 RGT。如前所述，RRoI  是一个包含 5 个元素（xr、yr、wr、hr、θr）的元组。为了消除歧义，我们使用 h 表示 RRoI 的短边， w 表示 RRoI 的长边。选择垂直于 h  并落在 [0, π] 中的方向作为 RRoI 的最终方向。在所有这些操作之后，就避免了歧义。此外，需要这些操作来减少旋转变化。

**多边形之间的 IoU** 在 RRoI 和 RGT 之间进行匹配时，我们仍然使用 IoU 作为标准。如果具有任何 RGT 的 RRoI 的 IoU 超过 0.5 的阈值，则认为它是  True Positive (TP)。对于 RRoI 和 RGT 之间的 IoU 的计算，我们使用公式。 (5) 如下图。它与水平边界框之间的 IoU  计算具有类似的形式。唯一的区别是 RRoI 的 IoU 计算是在多边形内执行的。 Br 表示 RRoI 的边界框。 Bgt  表示基本事实的边界框。面积是计算任意多边形面积的函数。

**目标计算** RRoI warping 后，得到旋转不变特征。然后我们添加一个 2048 维的全连接层（fc），然后是两个兄弟 fcs 用于最终分类和回归（见图  2）。分类目标与之前的工作相同。但是，回归目标是不同的。为了保持一致性，偏移量也需要是旋转不变的。为了实现这一目标，我们使用图 3  中解释的相对偏移量。主要思想是使用绑定到 RRoI 的坐标系而不是图像来计算偏移量。方程。 (1) 是相对偏移量的派生公式。

