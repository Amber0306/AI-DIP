# Numpy库入门

## 数据的维度

维度：一组数据的组织形式

一维数据：由对等关系的有序或无需数据构成，采用线性方式组织

列表和数组：列表的数据类型可以不同，数组的数据类型相同

二维数据：由多个一维数据构成，是一维数据的组合形式

多维数据：由一维或二维数据在新的维度上扩展形成

高维数据：仅利用最基本的二元关系展示数据间的复杂结构

### 数据维度的python表示

- 一维数据：列表和集合类型
- 二维数据：列表类型
- 多维数据：列表类型
- 高维数据：字典类型或其他数据表示格式，JSON, XML, YAML等

## Numpy的数组对象

Numpy是一个开源的python科学计算基础库。底层使用C实现。

功能包含：

- 一个强大的N维数组对象， ndarray
- 广播功能函数
- 整合C/C++/Fortran代码工具
- 线性代数、傅里叶级数变换、随机数生成等功能

引用方法：

```python
import numpy as np
```

### N维数组对象 ndarray

#### 优点

- 去掉元素间运算所需循环，使得一维向量更像单个数据
- 设置专门数组对象，经过优化，可提升运算速度
- 数组对象采用相同的数据类型，有助于节省运算和存储空间

#### 构成

ndarray是一个多维数组对象，由实际数据和描述这些数据的元数据构成。

一般要求所有元素类型相同（同质），数组下标从0开始。

轴axis：保存数据的维度

秩rank：轴的数量

#### ndarray对象属性

| 属性      | 说明                             |
| --------- | -------------------------------- |
| .ndim     | 秩，维度的数量                   |
| .shape    | 对象的尺度，对于矩阵，n行m列     |
| .size     | 对象元素的个数，相当于n*m的值    |
| .dtype    | 对象的元素类型                   |
| .itemsize | 对象中每个元素的大小，字节为单位 |

## ndarray数组的元素类型

类型包括：

bool, intc, intp, int8, int16, int32, int64 

uint8, uint16, uint32, uint64, float16, float32, float64

complex64, complex128

### 定义精细的原因

- 科学计算涉及数据多，对存储和性能有较高要求
- 有助于NumPy合理使用存储空间并优化性能
- 有助于程序员对程序规模有合理评估

### 非同质的ndarray对象

将其类型定义为Object对象类型，需要尽量避免使用。

## ndarray数组的创建

### 从python中的列表、元组等类型创建ndarray数组

```python
x = np.array(list/tuple)
x = np.array(list/tuple, dtype=np.float32)
```

不指定dtype时，将自动关联一个dtype类型。

### 使用Numpy中函数创建ndarray数组

| 函数                | 说明                                           |
| ------------------- | ---------------------------------------------- |
| np.arange(n)        | 类似range()函数，返回ndarray类型，元素从0到n-1 |
| np.ones(shape)      | 根据shape生成一个全1数组，shape是元组类型      |
| np.zeros(shape)     | 根据shape生成一个全0数组，shape是元组类型      |
| np.full(shape,val)  | 根据shape生成一个数组，每个元素值都是val       |
| np.eye(n)           | 创建一个正方的n*n单位矩阵，对角线为1，其余0    |
| np.ones_like(a)     | 根据数组a的形状生成一个全1数组                 |
| np.zeros_like(a)    | 根据数组a的形状生成一个全0数组                 |
| np.full_like(a,val) | 根据数组a的形状生成一个数组，每个元素值都是val |
| np.linspace()       | 根据起止数据等间距地填充数据，形成数组         |
| np.concatenate()    | 将两个或多个数组合并成为一个新数组             |

### 从字节流raw bytes中创建ndarray数组

略

### 从文件中读取特定格式，创建ndarray数组

略

## ndarray数组的变换

### 维度变换

| 方法               | 说明                                              |
| ------------------ | ------------------------------------------------- |
| .reshape(shape)    | 不改变数组元素，返回一个shape形状数组，原数组不变 |
| .resize(shape)     | 与.reshape功能一致，但修改原数组                  |
| .swapaxes(ax1,ax2) | 将数组n个维度中地两个维度进行调换                 |
| .flatten()         | 对数组进行降维，返回折叠后的一维数组，原数组不变  |

### 元素类型变换

```python
new_a = a.astype(new_type)
```

astype()方法创建一个新的数组，原始数据的拷贝。

### 数组向列表转换

```python
ls = a.tolist()
```

## ndarray数组的操作

### 数组的索引和切片

#### 一维数组的索引和切片

```python
# 索引
a = np.array([9,8,7,6,5])

a[2]

# 切片
a[1:4:2]
# 起始编号：终止编号（不含）；步长，3元素冒号分割
# 编号从0开始从左递增，或从-1开始从右递减
```

#### 多维数组索引和切片

```python
# 索引
a[0,1,2]
a[-1,-2,-3]
# 每个维度一个索引值，逗号分割

# 切片
a[:,1,-3]
a[:,1:3,:]
a[:,:,::2]
# 选取一个维度用:  
# 每个维度切片方法和一维数组一致，每个维度可以使用步长跳跃切片
```

## ndarray数组的运算

### 数组与标量之间的运算

数组与标量之间的运算作用于数组的每一个元素

```python
a = np.arange(24).reshape((2,3,4))
a.mean() # 计算平均值
a = a/a.mean()
```

###  Numpy一元函数

| 函数                                                         | 说明                                                 |
| ------------------------------------------------------------ | ---------------------------------------------------- |
| np.abs(x)   np.fabs(x)                                       | 计算数组各元素的绝对值                               |
| np.sqrt(x)                                                   | 计算数组各元素的平方根                               |
| np.squre(x)                                                  | 计算数组各元素的平方                                 |
| np.log(x)   np.log10(x)  np.log2(x)                          | 计算数组各元素的自然对数、10底数对数和2底数对书      |
| np.ceil(x)  np.floor(x)                                      | 计算数组个元素的ceiling值和floor值                   |
| np.rint(x)                                                   | 计算数组各元素的四舍五入值                           |
| np.modf(x)                                                   | 将数组各元素的小数和证书部分以两个独立的数组形式返回 |
| np.cos(x)   np.cosh(x)<br />np.sin(x)  np.sinh(x)<br />np.tan(x)  np.tanh(x) | 计算数组各元素的普通型和双曲型三角函数               |
| np.exp(x)                                                    | 计算各元素的指数值                                   |
| np.sign(x)                                                   | 计算数组各元素的符号值                               |

### Numpy二元函数

| 函数                                                       | 说明                                         |
| ---------------------------------------------------------- | -------------------------------------------- |
| + - *  /  **                                               | 两数组各元素进行对应运算                     |
| np.maximum(x,y)  np.fmax()<br />np.minimum(x,y)  np.fmin() | 元素级最大、最小值运算                       |
| np.mod(x,y)                                                | 元素级的模运算                               |
| np.copysigh(x,y)                                           | 将数组y中各元素值的符号赋值给数组x的对应元素 |
| > < >= <= == !=                                            | 算术比较、产生布尔型数组                     |

